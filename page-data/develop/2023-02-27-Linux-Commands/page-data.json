{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/develop/2023-02-27-Linux-Commands/","result":{"data":{"site":{"siteMetadata":{"title":"SeungHyun's Library"}},"markdownRemark":{"id":"8a29ac93-a82e-5224-80ec-2cc2f1c06de0","excerpt":"SSH 비밀번호 없이 로그인하기 ssh tunneling 웹페이지 로딩 시간 측정 PyEnv rsync pm2 NVM nano 스핑크스 검색엔진 한글 인덱싱 관련 링크 rsync 많은 파일 복사 ffmpeg b2, wasabi rclone wasabi b2 MongoDB admin…","html":"<h1>SSH</h1>\n<h3>비밀번호 없이 로그인하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">chmod</span> <span class=\"token number\">700</span> ~/.ssh/\n<span class=\"token function\">chmod</span> <span class=\"token number\">600</span> ~/.ssh/authorized_keys\n\nssh-keygen <span class=\"token parameter variable\">-t</span> rsa\nssh-copy-id id@server <span class=\"token parameter variable\">-p22</span> \n<span class=\"token function\">scp</span> ~/.ssh/id_rsa.pub <span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">]</span>@<span class=\"token punctuation\">[</span>host<span class=\"token punctuation\">]</span>:~/.ssh/authorized_keys</code></pre></div>\n<h3>ssh tunneling</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">ssh</span> <span class=\"token punctuation\">{</span>REMOTE_HOST<span class=\"token punctuation\">}</span> <span class=\"token parameter variable\">-L</span> <span class=\"token number\">5900</span>:localhost:5900 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">22</span></code></pre></div>\n<h1>웹페이지 로딩 시간 측정</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-o</span> /dev/null <span class=\"token parameter variable\">-s</span> <span class=\"token parameter variable\">-w</span> <span class=\"token string\">'%{time_total}'</span> <span class=\"token operator\">&lt;</span>URL<span class=\"token operator\">></span></code></pre></div>\n<h1>PyEnv</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pyenv <span class=\"token function\">install</span> <span class=\"token parameter variable\">-list</span>\npyenv global <span class=\"token number\">3.6</span>.0\npyenv versions</code></pre></div>\n<h1>rsync</h1>\n<h1>pm2</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pm2 start <span class=\"token parameter variable\">--name</span> <span class=\"token string\">\"{MYNAME}\"</span> <span class=\"token function\">npm</span> -- run server-test</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pm2 delete <span class=\"token operator\">&lt;</span>process_id<span class=\"token operator\">></span>\npm2 stop <span class=\"token operator\">&lt;</span>process_id<span class=\"token operator\">></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">pm2 startup\npm2 save\npm2 unstartup</code></pre></div>\n<h1>NVM</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nvm <span class=\"token function\">install</span> <span class=\"token parameter variable\">--lts</span>\nnvm use <span class=\"token parameter variable\">--lts</span>\nnvm <span class=\"token builtin class-name\">alias</span> default system</code></pre></div>\n<h1>nano</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">파일 끝으로 이동: ^wv\n라인삭제 ^k</code></pre></div>\n<h1>스핑크스 검색엔진</h1>\n<p>한글 인덱싱</p>\n<p><a href=\"https://blog.iramine.com/entry/%EA%B2%80%EC%83%89%EC%97%94%EC%A7%84-%EC%8A%A4%ED%95%91%ED%81%AC%EC%8A%A4-Sphinx-%EB%8F%84%EC%9E%85\">관련 링크</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">charset_table = 0..9, A..Z->a..z, _, a..z,U+AC00..U+D7A3,U+1100..U+1159,U+1161..U+11A2,U+11A8..U+11F9,U+0021..U+002F,U+003A..U+0040,U+005B..U+0060,U+007B..U+007E \nngram_chars = U+AC00..U+D7A3</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre class=\"language-mysql\"><code class=\"language-mysql\">CREATE TABLE `search_table` (\n  `id` bigint(20) unsigned NOT NULL,\n  `weight` int(11) NOT NULL,\n  `query` varchar(3072) NOT NULL,\n  `group_id` int(11) DEFAULT NULL,\n  KEY `query` (`query`(1024))\n) ENGINE=SPHINX DEFAULT CHARSET=utf8;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[mysqld]\ncharacter-set-server = utf8\nskip-character-set-client-handshake\n\nmax_connections = 4096\nkey_buffer_size = 1024M\n#max_allowed_packet = 512M\nmax_allowed_packet = 512M\ntable_open_cache = 2048\n#sort_buffer_size = 32M\nsort_buffer_size = 64M\njoin_buffer_size = 64M\nread_buffer_size = 64M\nthread_cache_size = 120\nread_rnd_buffer_size = 64M\nmyisam_sort_buffer_size = 128M\n\nquery_cache_size = 4096M\nquery_cache_type = 1\ndefault-storage-engine=InnoDB\n\ninnodb_buffer_pool_size = 24G\ninnodb_buffer_pool_instances = 16\nopen-files-limit = 8192\ntmp_table_size = 4G\nmax_heap_table_size = 4G\ninnodb_read_io_threads = 64\ninnodb_write_io_threads = 64\n\nthread_concurrency = 8\n\nslow_query_log = 1\nslow_query_log_file = /var/log/mysql-slow.log\nlong_query_time=3\n\n#wait_timeout = 28800\nwait_timeout = 600\nlock_wait_timeout = 600\ninnodb_lock_wait_timeout = 600\n\nskip-name-resolve\nskip-external-locking</code></pre></div>\n<h1>rsync</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avh</span> /Volumes/wd4tb01/ /Volumes/wd4tb02/\n<span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avh</span> <span class=\"token parameter variable\">--delete</span> --ignore-errors <span class=\"token parameter variable\">--exclude</span><span class=\"token operator\">=</span><span class=\"token string\">\".Trashes\"</span> <span class=\"token parameter variable\">--exclude</span><span class=\"token operator\">=</span><span class=\"token string\">\".Spotlight-V100\"</span> /Volumes/wd4tb03/ /Volumes/wd4tb04/\n<span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avh</span> <span class=\"token parameter variable\">--delete</span> --ignore-errors <span class=\"token parameter variable\">--exclude</span><span class=\"token operator\">=</span><span class=\"token string\">\".Trashes\"</span> <span class=\"token parameter variable\">--exclude</span><span class=\"token operator\">=</span><span class=\"token string\">\".Spotlight-V100\"</span> /Volumes/wd4tb01/ /Volumes/wd4tb02/\n<span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-avzh</span> root@<span class=\"token punctuation\">[</span>host<span class=\"token punctuation\">]</span>:/disk2/ /Volumes/wd4tb04/</code></pre></div>\n<h1>많은 파일 복사</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">find</span> /dir/from <span class=\"token parameter variable\">-type</span> f <span class=\"token parameter variable\">-name</span> <span class=\"token string\">\"*.swf\"</span> <span class=\"token parameter variable\">-exec</span> <span class=\"token function\">cp</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> /dir/to</code></pre></div>\n<h1>ffmpeg</h1>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /mnt/preview.png <span class=\"token parameter variable\">-threads</span> <span class=\"token number\">2</span> <span class=\"token parameter variable\">-n</span> <span class=\"token parameter variable\">-i</span> /example.swf <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 \"/example.mp4”<span class=\"token punctuation\">;</span>\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /0.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p /example.mp4\n    \n    \n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4\n    \nffmpeg <span class=\"token parameter variable\">-loop</span> <span class=\"token number\">1</span> <span class=\"token parameter variable\">-i</span> /example.jpg <span class=\"token parameter variable\">-y</span> <span class=\"token parameter variable\">-i</span> /example.mp3 <span class=\"token parameter variable\">-c:a</span> aac <span class=\"token parameter variable\">-b:a</span> 128k <span class=\"token parameter variable\">-c:v</span> libx264 <span class=\"token parameter variable\">-shortest</span> <span class=\"token parameter variable\">-strict</span> <span class=\"token parameter variable\">-2</span> <span class=\"token parameter variable\">-pix_fmt</span> yuv420p <span class=\"token parameter variable\">-vf</span> <span class=\"token assign-left variable\">scale</span><span class=\"token operator\">=</span><span class=\"token number\">360</span>:-2 /example.mp4</code></pre></div>\n<h1>b2, wasabi</h1>\n<h3>rclone</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rclone sync /from_dir wasabi:[host]/to_dir -v</code></pre></div>\n<h3>wasabi</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export AWS_PROFILE=wasabi\naws s3 sync /from_dir s3://[host]/to_dir\n</code></pre></div>\n<h3>b2</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export LANG=en_US.UTF-8\nexport LC_ALL=en_US.UTF-8\nb2 sync /from_dir b2://to_dir\nb2 sync --compareVersions size --replaceNewer /from_dir b2://to_dir\n</code></pre></div>\n<h1>MongoDB</h1>\n<h3>admin</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">db.createUser<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user: <span class=\"token string\">\"admin\"</span>, pwd: <span class=\"token string\">\"\"</span>, roles: <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> role: <span class=\"token string\">\"dbAdmin\"</span>, db: <span class=\"token string\">\"dbname\"</span> <span class=\"token punctuation\">}</span>,<span class=\"token punctuation\">{</span> role: <span class=\"token string\">\"readWrite\"</span>, db: <span class=\"token string\">\"dbname\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>backup</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mongodump <span class=\"token parameter variable\">-host</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-port</span> <span class=\"token number\">27017</span>\n<span class=\"token parameter variable\">-username</span> admin <span class=\"token parameter variable\">-password</span> <span class=\"token string\">\"pwd\"</span>\n<span class=\"token parameter variable\">-db</span> dbname <span class=\"token parameter variable\">-authenticationDatabase</span> dbname</code></pre></div>\n<h3>restore</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mongorestore <span class=\"token parameter variable\">-host</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-port</span> <span class=\"token number\">27017</span>\n<span class=\"token parameter variable\">-username</span> admin <span class=\"token parameter variable\">-password</span> <span class=\"token string\">\"pwd\"</span>\n<span class=\"token parameter variable\">-authenticationDatabase</span> dbname ~/dump/</code></pre></div>\n<h3>migration</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">db.copyDatabase<span class=\"token punctuation\">(</span><span class=\"token string\">\"fromdbname\"</span>, <span class=\"token string\">\"todbname\"</span>, <span class=\"token string\">\"host\"</span>, <span class=\"token string\">\"admin\"</span>, <span class=\"token string\">\"pwd\"</span>, <span class=\"token string\">\"SCRAM-SHA-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"커맨드 모음","date":"2023년 02월 27일","description":"","category":"develop"}},"previous":{"fields":{"slug":"/TIL/2023-02-26-일-TIL/"},"frontmatter":{"title":"2023-02-26 일 TIL"}},"next":{"fields":{"slug":"/routine/2023-Daily-Routine/"},"frontmatter":{"title":"2023 Daily Routine"}}},"pageContext":{"id":"8a29ac93-a82e-5224-80ec-2cc2f1c06de0","previousPostId":"3b6bf663-7e29-51d0-bed7-6c68db2338d8","nextPostId":"b6d23df0-90e3-5eb9-a676-a692f14d7846"}},"staticQueryHashes":["2355076697","2841359383"]}