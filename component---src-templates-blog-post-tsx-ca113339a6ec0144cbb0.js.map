{"version":3,"file":"component---src-templates-blog-post-tsx-ca113339a6ec0144cbb0.js","mappings":"yMAIe,SAASA,EAAT,GAAgC,IAAbC,EAAY,EAAZA,SAC1BC,GAAeC,EAAAA,EAAAA,UACfC,GAAQC,EAAAA,EAAAA,KACd,GAA4BC,EAAAA,EAAAA,WAAS,GAA9BC,EAAP,KAAeC,EAAf,KA0CA,OAxCAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAgCC,SAASC,cAAc,UAE7DF,EAAWG,OAAS,SAACC,GAEnB,IADA,IAAIC,EAAM,EACDC,EAAI,EAAGA,EAAId,EAAae,QAAQC,SAASC,OAAQH,IACP,OAA7Cd,EAAae,QAAQC,SAASF,GAAGI,WACnCL,IACCb,EAAae,QAAQC,SAASF,GAAGE,SAAS,GAAyBL,OAAU,SAACC,GAC7EN,GAAU,EADZ,GAOJ,GAAIO,EAAM,EACR,IAAK,IAAIC,EAAI,EAAGA,EAAId,EAAae,QAAQC,SAASC,OAAS,EAAGH,IACX,OAA7Cd,EAAae,QAAQC,SAASF,GAAGI,UACnClB,EAAae,QAAQI,YAAYnB,EAAae,QAAQC,SAASF,GAfvE,EAqBA,IAAMM,EAAa,CACjBC,IAAK,gCACLC,KAAM,0BACN,aAAc,WACdC,MAAO,UACPrB,MAAM,UAAWA,EAAMsB,IACvBC,YAAa,YACbC,MAAO,QACPC,MAAO,QAETC,OAAOC,QAAQT,GAAYU,SAAQ,YAAmB,IAAjBN,EAAgB,KAAXO,EAAW,KACnDvB,EAAWwB,aAAaR,EAAKO,EAD/B,IAGA/B,EAAae,QAAQkB,YAAYzB,EArC1B,GAsCN,CAACT,EAASmC,SAAUhC,EAAMsB,OAEtBW,EAAAA,EAAAA,IAAAA,MAAAA,CAAKC,IAAKpC,EAAcqC,KAAKA,EAAAA,EAAAA,IAAF,oBAE9BhC,IAAUgC,EAAAA,EAAAA,IAAJ,oBAEOC,EAAAA,GAFP,kBAFwB,eAQnC,C","sources":["webpack://gatsby-starter-blog/./src/components/comment.tsx"],"sourcesContent":["import React, { createRef, useEffect, useRef, useState } from \"react\";\nimport { css, useTheme } from \"@emotion/react\";\nimport { fadeIn } from \"../styles/keyframes\";\n\nexport default function Comment({ location }) {\n  const containerRef = useRef<HTMLDivElement>();\n  const theme = useTheme();\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    const utterances: HTMLScriptElement = document.createElement(\"script\");\n\n    utterances.onload = (e) => {\n      let cnt = 0;\n      for (let i = 0; i < containerRef.current.children.length; i++) {\n        if (containerRef.current.children[i].nodeName == \"DIV\") {\n          cnt++;\n          (containerRef.current.children[i].children[0] as HTMLIFrameElement).onload = ((e) => {\n            setLoaded(true);\n          });\n        }\n      }\n\n      // 테마 변경으로 댓긆창이 여러개 로딩되면 마지막것만 남기고 제거\n      if (cnt > 1) {\n        for (let i = 0; i < containerRef.current.children.length - 1; i++) {\n          if (containerRef.current.children[i].nodeName == \"DIV\") {\n            containerRef.current.removeChild(containerRef.current.children[i]);\n          }\n        }\n      }\n    };\n\n    const attributes = {\n      src: \"https://utteranc.es/client.js\",\n      repo: \"heyask/heyask.github.io\",\n      \"issue-term\": \"pathname\",\n      label: \"comment\",\n      theme: `github-${theme.key}`,\n      crossOrigin: \"anonymous\",\n      async: \"false\",\n      defer: \"true\"\n    };\n    Object.entries(attributes).forEach(([key, value]) => {\n      utterances.setAttribute(key, value);\n    });\n    containerRef.current.appendChild(utterances);\n  }, [location.pathname, theme.key]);\n\n  return <div ref={containerRef} css={css`\n    min-height: 269px;\n    ${loaded && css`\n    iframe {\n      animation: ${fadeIn} 2s;\n    }\n    `}\n  `} />;\n}"],"names":["Comment","location","containerRef","useRef","theme","useTheme","useState","loaded","setLoaded","useEffect","utterances","document","createElement","onload","e","cnt","i","current","children","length","nodeName","removeChild","attributes","src","repo","label","key","crossOrigin","async","defer","Object","entries","forEach","value","setAttribute","appendChild","pathname","___EmotionJSX","ref","css","fadeIn"],"sourceRoot":""}